!function(t,e){"use strict";var a=function(){return new a.init},n={font:".page__sheet",h1:".page__sheet div[data-type=h1] div.adding_content h1","h1-size":".page__sheet div[data-type=h1]",h2:".page__sheet div[data-type=h2] div.adding_content h2","h2-size":".page__sheet div[data-type=h2]",excerption:".page__sheet div[data-type=excerption] div.adding_content q","excerption-size":".page__sheet div[data-type=excerption]",text:".page__sheet div[data-type=text] div.adding_content p, div[data-type=text] div.adding_content p div","text-size":".page__sheet div[data-type=text]","picture-text":".page__sheet div[data-type=picture-text] .top__right h1","picture-text-border":".page__sheet div[data-type=picture-text]"},i=function(){if(localStorage.user){var t=(JSON.parse(localStorage.user),sendData.idUser+sendData.secret);sendData.hash=CryptoJS.HmacSHA1(t,sendData.secret.toString()).toString(),delete sendData.secret,e.ajax({type:"GET",url:"api/css/getStyle",data:sendData,statusCode:{201:function(t){return JSON.parse(t)},404:function(){return!1}}})}},r=function(t){if(!t)return!1;var e,a,i,r,d,s,o,p,c={},u={};for(e=0,a=t.length;a>e;e++)s=t[e],i=s.name.slice(0,s.name.indexOf("[")),r=s.name.slice(s.name.indexOf("[")+1,-1),c[i]||(u={}),u[r]=s.value,c[i]=u;d="<style>";for(o in c)if(c.hasOwnProperty(o)){d+=n[o]+"{";for(p in c[o])c[o].hasOwnProperty(p)&&(d+=p+": "+c[o][p]+";");d+="}"}return d+="</style>"};a.prototype={setStyle:function(t){var a=r(t);return e(".data__style").html(a),a},saveStyle:function(t){if(localStorage.user){var a=JSON.parse(localStorage.user),n=a.idUser,i=CryptoJS.HmacSHA1(n+t,a.secret.toString()).toString();e.ajax({method:"POST",url:"api/css/setStyle",data:{idUser:n,data:t,hash:i},statusCode:{201:function(t){return!0},404:function(){return!1}}})}else window.location.href="/"}},a.init=function(){var t=this;t.setStyle(i())},a.init.prototype=a.prototype,t.uawcapp.Style=a}(window,jQuery);